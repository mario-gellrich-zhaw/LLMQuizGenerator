import{m as D,V as h,b as m}from"./VOverlay-D5SsAUIM.js";import{f as A}from"./forwardRefs-4syOH2-z.js";import{p as L,j as w,q as x,v as B,an as S,w as g,D as F,z as I,B as f,A as p,ah as R}from"./index-C7jXg81h.js";import{u as T}from"./scopeId-CFdMVFIo.js";import{g as O}from"./VGrid-B1elj0Wo.js";const z=L({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...D({origin:"center center",scrollStrategy:"block",transition:{component:h},zIndex:2400})},"VDialog"),M=w()({name:"VDialog",props:z(),emits:{"update:modelValue":o=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(o,E){let{emit:v,slots:i}=E;const u=x(o,"modelValue"),{scopeId:V}=T(),e=B();function d(t){var r,s;const n=t.relatedTarget,l=t.target;if(n!==l&&((r=e.value)!=null&&r.contentEl)&&((s=e.value)!=null&&s.globalTop)&&![document,e.value.contentEl].includes(l)&&!e.value.contentEl.contains(l)){const a=R(e.value.contentEl);if(!a.length)return;const c=a[0],y=a[a.length-1];n===c?y.focus():c.focus()}}S&&g(()=>u.value&&o.retainFocus,t=>{t?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0});function P(){var t;v("afterEnter"),(t=e.value)!=null&&t.contentEl&&!e.value.contentEl.contains(document.activeElement)&&e.value.contentEl.focus({preventScroll:!0})}function b(){v("afterLeave")}return g(u,async t=>{var n;t||(await F(),(n=e.value.activatorEl)==null||n.focus({preventScroll:!0}))}),I(()=>{const t=m.filterProps(o),n=f({"aria-haspopup":"dialog"},o.activatorProps),l=f({tabindex:-1},o.contentProps);return p(m,f({ref:e,class:["v-dialog",{"v-dialog--fullscreen":o.fullscreen,"v-dialog--scrollable":o.scrollable},o.class],style:o.style},t,{modelValue:u.value,"onUpdate:modelValue":r=>u.value=r,"aria-modal":"true",activatorProps:n,contentProps:l,role:"dialog",onAfterEnter:P,onAfterLeave:b},V),{activator:i.activator,default:function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return p(O,{root:"VDialog"},{default:()=>{var c;return[(c=i.default)==null?void 0:c.call(i,...s)]}})}})}),A({},e)}});export{M as V};
